#import "../../lib.typ": *

= 课后习题

== 第1章：鸽巢原理<ch1>

=== $P_22,6.$ 

#showybox(
  title: [
证明：从1,2,…,200 中任取100 个整数，其中之一小于16,那么必有两个数，一个能被另一个整除。
])[
首先，将整数1至200按照$1*2^n，3*2^n，5*2^n，…，197，199$的形式分成100个抽屉，从1到200中任取100个，其中有一数a小于16，假设没有两个构成整除关系，首先按抽屉原理，这100个数必须为每个抽屉中仅取且必取1个数，否则假设不成立，所以：

- 当a为小于16的奇数时（比如15），显然有数与其构成整数关系（比如抽屉15*11=165）结论成立；
- 当此数为$1*2^n$时，显然$n≤3$,考虑抽屉$3*2^(n_1)，9*2^(n_2)，27*2^(n_3)，81*2^(n_4)$，显然若不存在整除关系，则$n_4 <n_3<n_2<n_1<3$，即四个数只能在0、1、2三个数中选择，此时产生矛盾，必存在两数整除关系;
- 更一般的，当此数为非2的幂的偶数时，可写成$b*2^n$，b为奇数，且$1<b≤7，n≤2$，考虑抽屉$3b*2^(n_1),9b*2^(n_2),27b*2^(n_3)$(因$b≤7,27b<200$), $n_3<n_2<n_1<2$，即三个数只能在0、1两个数中选择，此时产生矛盾。

综上，假设不成立，必存在两数整除关系。
]

=== $P_23,15.$ 

#showybox(
  breakable: true,
  title: [
证明：从1,2,… ,2n 中任选n +1个整数，则其中必有两个数，它们的最大公因子 为 1
  ]
)[
1. 构造配对

   将集合${1,2,3,#sym.dots.h,2n}$中的数两两配对，形成n对：
   $ (1,2),(3,4),#sym.dots.h,(2n-1,2n) $
   每一对中的两个数都是连续的奇数和偶数。

2. 应用鸽巢原理

   - 我们有 n 对，每对包含两个数。
   - 任取n + 1个数，根据鸽巢原理，至少有一对中的两个数被选中。

3. 分析被选中的两数

   - 设这对被选中的数为  $(2k - 1, 2k)$ ，其中  k  为正整数， $1 ≤ k ≤ n$ 。
   - 这两个数是连续的奇数和偶数，即  2k - 1  和  2k 。
   - 由于  2k - 1  是奇数， 2k  是偶数，它们的最大公因子为：
     
     $ gcd(2k - 1, 2k) = gcd(2k - 1, 2k - (2k - 1)) = gcd(2k - 1, 1) = 1 $
     
    因此，这两个数互质。


根据上述分析，无论从  $1, 2, ……, 2n$  中选取哪  $n + 1$  个数，必定存在至少一对连续的奇数和偶数，这对数的最大公因子为 1。因此，在所选的  $n + 1$  个数中，必有两个数互质。

综上所述， 从集合  $1, 2, ……, 2n$  中任取  n + 1  个整数，必存在两个数的最大公因子为 1。
]

=== $P_23,26.$ 

#showybox(
  title: [
    证明：在任意给出的n+1(n≥2)个正整数中必有两个数，它们的差能被 n 整除.
  ]
)[
1. 考虑数的模  n  余数

   任何一个正整数  a  都可以表示为：
   
   $a = q * n + r$
   
   其中， q  是商， r  是余数，且  $0 ≤ r < n$ 。

   因此，每个正整数在除以  n  后，其余数  r  只能取  $0, 1, 2, ……, n-1$  这  n  个可能的值。

2. 应用鸽巢原理

   - 我们有  n + 1  个正整数，每个数在除以  n  后有  n  种可能的余数。
   - 根据鸽巢原理，当我们有  n + 1  个“鸽子”放入  n  个“鸽巢”中时，至少有一个“鸽巢”中有至少两只“鸽子”。

   在这里，“鸽子”代表  n + 1  个正整数，“鸽巢”代表余数  $0, 1, 2, ……, n-1$ 。

3. 得出结论

   根据鸽巢原理，至少存在两个不同的正整数  a  和  b ，使得它们在除以  n  后的余数相同。即：$a #sym.eq.triple b (mod n)$
   
   这意味着：$a-b #sym.eq.triple 0 (mod n)$ $#sym.arrow.r.double$ n 整除 （a-b）
   
   
   因此，这两个数的差  a - b  能被  n  整除。

综上所述， 该命题得证。  
]

== 第2章：排列组合<ch2>

=== $P_48,3.$

#showybox(
  title: [
    12个人围坐在圆桌旁，其中一个拒绝与另一个相邻，问有多少种安排方法？
  ]
)[
对于12个人围坐在圆桌上的排列，总的不同排列数为：$(12 - 1)! = 11!$

如果A和B必须相邻，可以将A和B视为一个整体（记为AB或BA），这样就有11个“单位”需要排列。这些排列数为：$(11 - 1)! × 2 = 10! × 2$

要得到A和B不相邻的排列数，只需从总排列数中减去A和B相邻的排列数：$11! - 2 × 10! = 10! × (11 - 2) = 9 × 10!$

所以，A和B不相邻的不同排列数为 $9 × 10!$ 种。
]

=== $P_48,4.$

#showybox(
  title: [
有颜色不同的四盏灯.
+ 把它们按不同的次序全部挂在灯竿上表示信号，共有多少种不同的信号？ 
+ 每次使用一盏、二盏、三盏或四盏灯按一定的次序挂在灯竿上表示信号,   共有多少种不同的信号？ 
+ 在(2)中，如果信号与灯的次序无关，共有多少种不同的信号？
  ]
)[
(1) 对于4盏不同颜色的灯，全部挂上灯竿的排列数为4的全排列数：$4! =4×3×2×1=24$
][
(2) 使用k盏灯的排列数为 $P^k_4 = 4!/(4-k)!$，其中 k = 1, 2, 3, 4。

- 当 k = 1 时，使用1盏灯的排列数为 $P^1_4 = 4!/(4-1)! = 4$；
- 当 k = 2 时，使用2盏灯的排列数为 $P^2_4 = 4!/(4-2)! = 12$；
- 当 k = 3 时，使用3盏灯的排列数为 $P^3_4 = 4!/(4-3)! = 24$；
- 当 k = 4 时，使用4盏灯的排列数为 $P^4_4 = 4!/(4-4)! = 24$。

共有4+12+24+24=64种不同的信号。
][
(3) 使用k盏灯的排列数为 $C^k_4 = 4!/((4-k)!k!)$，其中 k = 1, 2, 3, 4。

- 当 k = 1 时，使用1盏灯的排列数为 $C^1_4 = 4!/((4-1)!1!) = 4$；
- 当 k = 2 时，使用2盏灯的排列数为 $C^2_4 = 4!/((4-2)!2!) = 6$；
- 当 k = 3 时，使用3盏灯的排列数为 $C^3_4 = 4!/((4-3)!3!) = 4$；
- 当 k = 4 时，使用4盏灯的排列数为 $C^4_4 = 4!/((4-4)!4!) = 1$。

共有4+6+4+1=15种不同的信号。
]


=== $P_49,6.$

#showybox(
  title: [
    把q个负号和p个正号排在一条直线上，使得没有两个负号相邻，证明不同的排法有$vec(p+1,q)$种 
  ]
)[
1. 先排列  p  个正号，形成  p+1  个间隙

2. 从这  p+1  个间隙中选择  q  个放置负号，确保负号不相邻。

3. 不同的排法数为 $vec(p+1,q)$ 。
]

=== $P_49,13.$

#showybox(
  title: [
    计数从$(0,0)$点到$(n,n)$点的不穿过直线 $y = x$ 的非降路径数.
  ]
)[
从可以先从$(0,0)$到达$(0, 1)$或者$(1, 0)$，这两个点到$(n,n)$而不穿过$y=x$的非降落路径数是相等的。于是可以考虑从$(1,0)$到$(n，n)$不穿过直线$y=x$的非降落路径数，由于不穿过$y=x$，那么必定是要经过点$(n, n-1)$。

从$(1,0)$到$(n,n-1)$的非降落路径数为：$C_(2n-2)^(n-1)$。

从$(1, 0)$到$(n, n-1)$穿过直线$y=x$的非降落路径和从$(0, 1)$到$(n, n-1)$的非降落路径是对称的等于：$C_(2n-2)^(n)$

于是从点$(0, 0)$点到$(n, n)$点的不穿过直线$y=x$的非降落路径数为：

$ 2 times (C_(2n-2)^(n-1) - C_(2n-2)^(n)) = 2 times ((2n-2)!/(n!(n-1)!) - (2n-2)!/(n!(n-2)!)) = 2 times (2n-2)!/(n!(n-1)!) = 2/n C_(2n-2)^(n-1) $
]

=== $P_50,23.$

#showybox(
  title: [
    $5$ 封不同的信用通信通道传送，在两封信之间至少要放$3$个空格，一共要加入$15$个空格，问有多少种方法？
  ]
)[
$5$封信一共有$A_5^5=120$种排列，$5$封信之间有$4$个间隔，每个间隔至少要放$3$个空格，共$12$个空格，剩下$15-12=3$个空格可以放在$4$个间隔的任意位置，等价于$x_1+x_2+x_3+x_4=3$的整数解个数，即$C_(3+4-1)^(4-1)=C_6^3=20$种方法。所以一共有$120*20=2400$种方法。
]

=== $P_70,16.$

#showybox(
  title: [
求出并证明

#mitex(`\sum_{\substack{r, s, t \geq 0 \\ r + s + t = n}} \binom{m_1}{r} \binom{m_2}{s} \binom{m_3}{t}`)

的结果。

  ],
  breakable: true
)[

利用二项式定理和生成函数的方法，考虑以下展开：

1. *展开每个二项式：*

   #mitex(`
   (1 + x)^{m_1} = \sum_{r=0}^{m_1} \binom{m_1}{r} x^r
   `)
   
   #mitex(`
   (1 + x)^{m_2} = \sum_{s=0}^{m_2} \binom{m_2}{s} x^s
   `)
   
   #mitex(`
   (1 + x)^{m_3} = \sum_{t=0}^{m_3} \binom{m_3}{t} x^t
   `)

2. *将以上三个展开式相乘：*

   #mi(`
   (1 + x)^{m_1}(1 + x)^{m_2}(1 + x)^{m_3} = (1 + x)^{m_1 + m_2 + m_3}
   `)

3. *考虑左边展开式中  $x^n$ 项的系数：*

   左边展开式的  $x^n$ 项系数为：

   #mitex(`
   \sum_{\substack{r,\, s,\, t \geq 0 \\ r + s + t = n}} \binom{m_1}{r} \binom{m_2}{s} \binom{m_3}{t}
   `)

4. *考虑右边展开式中  $x^n$ 项的系数：*

   右边展开式为：

   #mitex(`
   (1 + x)^{m_1 + m_2 + m_3} = \sum_{k=0}^{m_1 + m_2 + m_3} \binom{m_1 + m_2 + m_3}{k} x^k
   `)

   其中  $x^n$ 项的系数为：

   #mi(`
   \binom{m_1 + m_2 + m_3}{n}
   `)

5. *因此，两边的  $x^n $ 项系数相等，得到：*

   #mitex(`\sum_{\substack{r,\, s,\, t \geq 0 \\ r + s + t = n}} \binom{m_1}{r} \binom{m_2}{s} \binom{m_3}{t} = \binom{m_1 + m_2 + m_3}{n}`)

*证毕。*
]

=== $P_102,2.$

#showybox(
  title: [
    求从1到500的整数中能被3和5整除，但不能被7整除的数的个数。
  ],
  breakable: true

)[

1. *求能被3和5整除的数的个数：*

   3和5的最小公倍数是15，所以能被3和5同时整除的数就是能被15整除的数。

   计算从1到500中能被15整除的数的个数：

   #mi(`
   \left\lfloor \dfrac{500}{15} \right\rfloor = 33
   `)

   所以有33个数能被15整除。

2. *求上述数中还能被7整除的数的个数：*

   要找出能被15和7同时整除的数，我们需要计算它们的最小公倍数。

   15和7的最小公倍数是：

   #mi(`
   \text{lcm}(15,\,7) = 105
   `)

   计算从1到500中能被105整除的数的个数：

   #mi(`
   \left\lfloor \dfrac{500}{105} \right\rfloor = 4
   `)

   所以有4个数能被105整除，即能被15和7同时整除。

3. *求最终结果：*

   从能被15整除的33个数中减去能被105整除的4个数，得到不能被7整除的数的个数：

   #mi(`
   33 - 4 = 29
   `)

*答：29个。*
]

=== $P_102,3.$

#showybox(
  title: [
    求1与 1000之间既不是平方数又不是立方数的整数的个数.
  ],
  breakable: true

)[

1. *计算1到1000之间的平方数的个数：*

   设 $n$ 是一个正整数，使得  #mi(`n^2 \leq 1000`) 。

   求 $n$ 的最大值：

   #mi(`
   n \leq \sqrt{1000} \approx 31.62
   `)

   所以 $n$ 的最大整数值为31。

   因此，1到1000之间共有31个平方数。

2. *计算1到1000之间的立方数的个数：*

   设 $m$ 是一个正整数，使得 #mi( `m^3 \leq 1000` )。

   求 $m$ 的最大值：

   #mi(`
   m \leq \sqrt[3]{1000} \approx 10
   `) 

   所以 $m$ 的最大整数值为10。

   因此，1到1000之间共有10个立方数。

3. *计算1到1000之间既是平方数又是立方数的数的个数（即同时是六次方数）：*

   一个数同时是平方数和立方数，意味着它是6次方数。

   设 $k$ 是一个正整数，使得 #mi( `k^6 \leq 1000` )。

   求 $k$ 的最大值：

   #mi(`
   k \leq \sqrt[6]{1000} \approx 3.17
   `)

   所以 $k$ 的最大整数值为3。

   因此，1到1000之间共有3个六次方数。

4. *计算既是平方数又是立方数的数对总数的影响：*

   为了避免重复计算，需要用容斥原理：

   #mi(`
   \text{平方数或立方数的总个数} = 31 + 10 - 3 = 38
   `)

5. *计算既不是平方数又不是立方数的整数的个数：*

   总的整数个数为1000个，因此：

   #mi(`
   \text{既不是平方数又不是立方数的数的个数} = 1000 - 38 = 962
   `)

*答：1到1000之间既不是平方数又不是立方数的整数共有962个。*
]



=== $P_103,7.$

#showybox(
  title: [
求集合 ${1, 2, dots, n}$ 的排列数，使得在排列中正好有 k 个整数在它们的自然位置上（所谓自然位置，就是整数 i 排在第 i 位上）。
  ],
  breakable: true

)[
要解决这个问题，我们需要找到集合 #mi(`\{1, 2, \dots, n\}`) 的排列数，其中正好有 #mi(`k`) 个整数在它们的自然位置上（即固定点），也就是说，整数 #mi(`i`) 在第 #mi(`i`) 个位置上，对 #mi(`k`) 个不同的 #mi(`i`) 满足此条件。

这是一个经典的组合数学问题，涉及具有特定数量固定点的排列。解决方法包括以下两个步骤：

1. *选择要固定的 #mi(`k`) 个位置：*

   从 #mi(`n`) 个元素中选择 #mi(`k`) 个元素，使它们位于自然位置上。选择的方法数为组合数：
   #mi(`\[ C(n, k) = \frac{n!}{k!(n - k)!} \]`)

2. *对剩余的 #mi(`n - k`) 个元素进行无固定点排列（错排）：*

   我们需要计算剩余的 #mi(`n - k`) 个元素的排列数，使得它们没有一个在自然位置上。这称为错排，错排数 #mi(`D_{n - k}`) 由以下公式给出：
   #mi(`\[ D_{n - k} = (n - k)! \left(1 - \frac{1}{1!} + \frac{1}{2!} - \frac{1}{3!} + \cdots + (-1)^{n - k} \frac{1}{(n - k)!}\right) \]`)

   或者，#mi(`D_{n - k}`) 可以用子阶乘（记作「！#mi(`n - k`)」）表示：
   #mi(`\[ D_{n - k} = \text{！}(n - k) \]`)

   子阶乘的值可以递归或通过上述公式计算。

*综合以上步骤：*

具有正好 #mi(`k`) 个固定点的排列总数等于选择固定点的方法数乘以剩余元素的错排数：
#mi(`\[ \text{总排列数} = C(n, k) \times D_{n - k} \]`)

*答案：*

一个明确的表达式：排列数 = #mi(`C(n, k) \times D_{n - k}`)；也就是，#mi(`C(n, k)`) 乘以剩余 #mi(`n − k`) 个元素的错排数。
]

=== $P_103,12.$

#showybox(
  title: [
计算机系有三个运动队，每人一套运动服。现计算机系有足球服 38 套，篮球服 15 套，排球服 20 套。三个运动队共有 58 人，其中只有 3 人同时是三个队的队员，问恰好参加两个队的人数以及至少参加两个队的人数。
  ],
  breakable: true

)[
要解决这个问题，我们需要利用集合的容斥原理来计算参加两个或以上运动队的人数。

*已知条件：*

- 足球队人数：#mi(` n(A) = 38 `)
- 篮球队人数：#mi(` n(B) = 15 `)
- 排球队人数：#mi(` n(C) = 20 `)
- 三个队的总人数：#mi(` n(A \cup B \cup C) = 58 `)
- 同时参加三个队的人数：#mi(` n(A \cap B \cap C) = 3 `)

*步骤一：应用容斥原理*

容斥原理的公式为：

#mi(`\[
n(A \cup B \cup C) = n(A) + n(B) + n(C) - n(A \cap B) - n(A \cap C) - n(B \cap C) + n(A \cap B \cap C)
\]`)

将已知值代入：

#mi(`\[
58 = 38 + 15 + 20 - n(A \cap B) - n(A \cap C) - n(B \cap C) + 3
\]`)

计算总和：

#mi(`\[
58 = 73 - [n(A \cap B) + n(A \cap C) + n(B \cap C)] + 3
\]`)

整理方程：

#mi(`\[
58 - 3 = 73 - [n(A \cap B) + n(A \cap C) + n(B \cap C)]
\]`)

#mi(`\[
55 = 73 - [n(A \cap B) + n(A \cap C) + n(B \cap C)]
\]`)

因此：

#mi(`\[
n(A \cap B) + n(A \cap C) + n(B \cap C) = 73 - 55 = 18
\]`)

*步骤二：考虑三队交集的人数*

因为有 3 人同时参加了三个队，所以每个两队交集都包含了这 3 人。

设：

- 只参加足球队和篮球队的人数为 #mi(` x_{AB} `)
- 只参加足球队和排球队的人数为 #mi(` x_{AC} `)
- 只参加篮球队和排球队的人数为 #mi(` x_{BC} `)

那么：

#mi(`\[
n(A \cap B) = x_{AB} + 3 \\
n(A \cap C) = x_{AC} + 3 \\
n(B \cap C) = x_{BC} + 3
\]`)

因此，总的两两交集人数为：

#mi(`\[
n(A \cap B) + n(A \cap C) + n(B \cap C) = (x_{AB} + 3) + (x_{AC} + 3) + (x_{BC} + 3) = x_{AB} + x_{AC} + x_{BC} + 9
\]`)

已知这个总和等于 18，所以：

#mi(`\[
x_{AB} + x_{AC} + x_{BC} + 9 = 18
\]`)

#mi(`\[
x_{AB} + x_{AC} + x_{BC} = 9
\]`)

*步骤三：计算结果*

1. *恰好参加两个队的人数：*

   #mi(`\[
   x_{AB} + x_{AC} + x_{BC} = 9
   \]`)

   所以恰好参加两个队的人数为 9 人。

2. *至少参加两个队的人数：*

   至少参加两个队的人数等于恰好参加两个队的人数加上同时参加三个队的人数：

   #mi(`\[
   9（恰好参加两个队） + 3（同时参加三个队） = 12
   \]`)

*答案：*

- *恰好参加两个队的人数是 9 人。*
- *至少参加两个队的人数是 12 人。*
]

=== $P_103,14.$

#showybox(
  title: [
8 个小孩围坐在木马上，问有多少种变换座位的方法，使得每个小孩前面坐的都不是原来的小孩？
  ],
  breakable: true

)[
1625种
]

=== $P_103,16.$

#showybox(
  title: [
 $n$  个单位各派两名代表出席一个会议， $2n$  位代表围一圆桌坐下。试问：
1. 各单位的代表入座的方案有多少种？
2. 各单位的两位代表不相邻的方案数有多少？
  ],
  breakable: true

)[

]

=== $P_103,17.$

#showybox(
  title: [
一书架有  $m$  层，分别放置  $m$  类不同种类的书，每层  $n$  册。现将书架上的图书全部取出清理，清理过程中要求不打乱图书所在的类别，试问：
1.  $m$  类图书全不在各自原来层次上的方案数有多少？
2. 每层的  $n$  本书都不在原来位置上的方案数有多少？
  ],
  breakable: true

)[

]

=== $P_104,25.$

#showybox(
  title: [
 5 名旅客  $P_1, P_2, dots, P_5$  要去 5 个地方  $C_1, C_2, dots, C_5$ ，其中， $P_1$  不愿意去  $C_1, C_3$ ； $P_2$  不愿意去  $C_4 ； P_3$  不愿意去  $C_2, C_5$ ； $P_4$  不愿意去  $C_2 ； P_5$  不愿意去  $C_1, C_3$ 。问  $P_1$  去  $C_5$  的概率有多少？
  ],
  breakable: true

)[

]